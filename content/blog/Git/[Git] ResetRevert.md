---
title: '[Git] 원격 저장소에 올라간 커밋 되돌리기'
date: 2020-12-21 11:00:13
category: git
draft: false
---

### 원격 저장소 커밋 히스토리 제어하기

| 명령어   | reset                                                                                                       | revert                                                                                                                               |
| -------- | ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| 수행내용 | 커밋 히스토리를 강제로 조작하여 특정시점 이전의 커밋삭제                                                    | 특정 커밋을 되돌리는 작업도 하나의 커밋으로 간주하여 커밋 히스토리에 추가                                                            |
| 장점     | 원격 저장소에 다른 흔적없이 커밋들을 제거할 수 있으므로 혼자하는 작업이라면 가장 깔끔한 해결책이 될수 있다. | 특정 커밋을 되돌리는 작업조차 히스토리에 남으므로 내가 되돌린 시점을 누구나 쉽게 파악할 수 있다. 그러므로 팀으로 작업할 때 유용하다. |
| 방법     | git reset --hard HEAD^                                                                                      | git revert [되돌리고 싶은 commit의 hash]                                                                                             |

#### 1. reset후 강제 push하기

##### &#128128; 주의

히스토리를 강제로 삭제하여 조작한다는 점에서 **팀과 공유하는 원격저장소**라면 혼란이 생길 수 있다.

##### &#128161; 방법

해당 로컬저장소에서 git bash나 terminal를 열어서 아래 명령문을 입력한다.

###### A-1. 바로 직전 커밋으로 되돌리고 싶은 경우

```sh
$ git reset --hard HEAD^
```

###### A-2.바로 직전부터 3개 아래의 커밋으로 되돌리고 싶은 경우

```sh
$ git reset --hard HEAD~3
```

###### B. 원하는 상태의 커밋으로 돌아왔다면 강제 푸시

```sh
$ git push -f origin master
```

![](./images/gitReset.png)
위의 경우에는 해당 커밋으로 돌리기위해서 6차례의 reset을 진행 후 강제 푸시하였다.

##### &#10071; 이럴때 유용하다

- 원격저장소를 개인용으로 사용하고 있는 경우
- 강제로 되돌린 커밋을 pull한 팀원이 없는 경우
